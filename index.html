<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目需求火山喷发</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        /* 标题背景层 */
        .title-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-content: center;
            align-items: center;
            padding: 40px;
            opacity: 0.2;
            z-index: 1;
            pointer-events: none;
        }

        .title-item {
            font-size: 28px;
            font-weight: bold;
            color: #ffffff;
            margin: 25px 35px;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            white-space: nowrap;
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        /* 火山容器 */
        .volcano-container {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 250px;
            z-index: 10;
            filter: drop-shadow(0 -5px 15px rgba(0, 0, 0, 0.5));
        }

        /* 火山主体 - 使用渐变和阴影增强立体感 */
        .volcano {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 240px;
            height: 200px;
            background: linear-gradient(to right,
                    #654321 0%,
                    #8B4513 20%,
                    #A0522D 40%,
                    #8B4513 60%,
                    #654321 80%,
                    #5C4033 100%);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            filter: drop-shadow(2px 0 8px rgba(0, 0, 0, 0.4));
        }

        /* 火山左侧阴影（增强立体感） */
        .volcano-shadow-left {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 240px;
            height: 200px;
            background: linear-gradient(to right,
                    rgba(60, 40, 20, 0.6) 0%,
                    transparent 50%);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 9;
        }

        /* 火山表面纹理层 */
        .volcano-texture {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 180px;
            background:
                repeating-linear-gradient(45deg,
                    transparent 0px,
                    rgba(139, 69, 19, 0.3) 2px,
                    transparent 4px),
                repeating-linear-gradient(-45deg,
                    transparent 0px,
                    rgba(101, 67, 33, 0.2) 3px,
                    transparent 6px);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 10;
            opacity: 0.4;
        }

        /* 火山岩石细节 */
        .volcano-rock {
            position: absolute;
            background: #5C4033;
            border-radius: 3px;
            z-index: 10;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }

        .volcano-rock:nth-child(1) {
            width: 15px;
            height: 12px;
            bottom: 50px;
            left: 45%;
            transform: rotate(25deg);
        }

        .volcano-rock:nth-child(2) {
            width: 12px;
            height: 10px;
            bottom: 80px;
            left: 52%;
            transform: rotate(-15deg);
        }

        .volcano-rock:nth-child(3) {
            width: 18px;
            height: 14px;
            bottom: 120px;
            left: 48%;
            transform: rotate(40deg);
        }

        /* 火山口外圈 */
        .volcano-crater-outer {
            position: absolute;
            bottom: 175px;
            left: 50%;
            transform: translateX(-50%);
            width: 90px;
            height: 40px;
            background: radial-gradient(ellipse,
                    rgba(44, 24, 16, 0.8) 0%,
                    rgba(20, 10, 5, 0.9) 70%,
                    rgba(10, 5, 2, 1) 100%);
            border-radius: 50%;
            z-index: 11;
            box-shadow:
                inset 0 2px 10px rgba(0, 0, 0, 0.8),
                0 0 15px rgba(0, 0, 0, 0.5);
        }

        /* 火山口 */
        .volcano-crater {
            position: absolute;
            bottom: 180px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 30px;
            background: radial-gradient(ellipse,
                    #1a0f0a 0%,
                    #0d0705 50%,
                    #000000 100%);
            border-radius: 50%;
            z-index: 12;
            box-shadow:
                inset 0 3px 15px rgba(0, 0, 0, 0.9),
                0 0 20px rgba(0, 0, 0, 0.6);
        }

        /* 火山口内部（岩浆） */
        .volcano-lava {
            position: absolute;
            bottom: 185px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 20px;
            background: radial-gradient(ellipse,
                    #FF6B35 0%,
                    #FF4500 30%,
                    #FF6347 50%,
                    #DC143C 70%,
                    #8B0000 100%);
            border-radius: 50%;
            z-index: 13;
            animation: lava-glow 2s ease-in-out infinite;
            box-shadow:
                0 0 20px #FF4500,
                0 0 40px #FF6347,
                inset 0 2px 10px rgba(255, 69, 0, 0.8);
        }

        /* 岩浆气泡效果 */
        .lava-bubble {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #FFD700 0%, #FFA500 100%);
            border-radius: 50%;
            animation: bubble-rise 3s ease-in-out infinite;
            z-index: 14;
            box-shadow: 0 0 5px rgba(255, 215, 0, 0.8);
        }

        .lava-bubble:nth-child(1) {
            left: 48%;
            bottom: 190px;
            animation-delay: 0s;
        }

        .lava-bubble:nth-child(2) {
            left: 51%;
            bottom: 188px;
            animation-delay: 1s;
            width: 6px;
            height: 6px;
        }

        .lava-bubble:nth-child(3) {
            left: 49%;
            bottom: 192px;
            animation-delay: 2s;
            width: 7px;
            height: 7px;
        }

        @keyframes bubble-rise {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0.5);
            }

            50% {
                opacity: 1;
                transform: translateY(-5px) scale(1);
            }

            100% {
                opacity: 0;
                transform: translateY(-10px) scale(0.5);
            }
        }

        /* 火山烟雾 */
        .volcano-smoke {
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: radial-gradient(circle,
                    rgba(100, 100, 100, 0.6) 0%,
                    rgba(80, 80, 80, 0.4) 50%,
                    transparent 100%);
            border-radius: 50%;
            z-index: 8;
            animation: smoke-rise 4s ease-out infinite;
        }

        .volcano-smoke:nth-child(2) {
            width: 50px;
            height: 50px;
            bottom: 210px;
            left: 48%;
            animation-delay: 1s;
        }

        .volcano-smoke:nth-child(3) {
            width: 35px;
            height: 35px;
            bottom: 205px;
            left: 52%;
            animation-delay: 2s;
        }

        @keyframes smoke-rise {
            0% {
                opacity: 0.6;
                transform: translateX(-50%) translateY(0) scale(1);
            }

            50% {
                opacity: 0.4;
                transform: translateX(-50%) translateY(-30px) scale(1.5);
            }

            100% {
                opacity: 0;
                transform: translateX(-50%) translateY(-60px) scale(2);
            }
        }

        @keyframes lava-glow {

            0%,
            100% {
                opacity: 0.9;
                box-shadow:
                    0 0 15px #FF4500,
                    0 0 30px #FF6347,
                    inset 0 2px 10px rgba(255, 69, 0, 0.8);
            }

            50% {
                opacity: 1;
                box-shadow:
                    0 0 25px #FF4500,
                    0 0 50px #FF6347,
                    0 0 70px #FF8C00,
                    inset 0 2px 15px rgba(255, 69, 0, 1);
            }
        }

        /* 需求项容器 */
        .requirement-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            overflow: hidden;
            pointer-events: none;
        }

        .requirement-item {
            position: absolute;
            font-size: 16px;
            color: #fff;
            padding: 15px 8px;
            background: rgba(255, 69, 0, 0.8);
            /* 默认背景，会被JS覆盖 */
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.6);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8), 0 0 2px rgba(0, 0, 0, 0.5);
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
            z-index: 6;
            writing-mode: vertical-rl;
            text-orientation: upright;
            letter-spacing: 2px;
            line-height: 1.4;
            font-weight: 500;
        }
    </style>
</head>

<body>
    <div class="title-background" id="titleBackground"></div>
    <div class="requirement-container" id="requirementContainer"></div>

    <div class="volcano-container">
        <!-- 烟雾效果 -->
        <div class="volcano-smoke"></div>
        <div class="volcano-smoke"></div>
        <div class="volcano-smoke"></div>

        <!-- 火山阴影层 -->
        <div class="volcano-shadow-left"></div>

        <!-- 火山主体 -->
        <div class="volcano"></div>

        <!-- 火山表面纹理 -->
        <div class="volcano-texture"></div>

        <!-- 火山岩石细节 -->
        <div class="volcano-rock"></div>
        <div class="volcano-rock"></div>
        <div class="volcano-rock"></div>

        <!-- 火山口外圈 -->
        <div class="volcano-crater-outer"></div>

        <!-- 火山口 -->
        <div class="volcano-crater"></div>

        <!-- 火山口内部（岩浆） -->
        <div class="volcano-lava"></div>

        <!-- 岩浆气泡 -->
        <div class="lava-bubble"></div>
        <div class="lava-bubble"></div>
        <div class="lava-bubble"></div>
    </div>

    <script>
        // 原始文本数据
        const textData = `权限个性化配置改造（五期迭代）
  - 一期（2月）：
  - 二期（2月）：
  - 三期（3月）：
  - 四期（3月）：
  - 五期（4月）：
权限系统优化
  - 权限缓存优化
  - 权限清理
  - 权限分享
  - 权限操作记录完善
    
支付系统升级
- 分期支付接入（11月）
- 0元购及履约（7月）
- 苹果内购转钱海支付（5月）
  
订单系统优化
- 订单对接贝壳开票系统（6月）
- 订单加销售人员（7月）
- 订单下单页优化（8月）
- 订单折扣兑换逻辑优化（8月）
  
礼品卡系统
- 礼品卡兑换页优化（8月）
- 批量修改礼品卡的折扣金额（11月）
- 国内礼品卡支持（7月）
  
其他交易功能
- 首单优惠（7月）
- 管理后台费用中心优化（7月）
  

微信登录
- APP接入微信登录（12月）
- 微信第三方账号绑定（10月）
  
其他登录方式
- passport登录（6月）
- 三方登录国家码（11月）
  


VR空间审核
- VR空间审核流程（12月）：

    
VR收藏与标签
- VR收藏（2月、3月）
- 标签优化（9月）
- 标签搜索（3月）
- 标签体系优化（2月）
- 全景图标签（3月）
  
VR带看功能
- vrc带看改造（9月）
- saas带看（9月）
- 途家带看（9月）
- 带看梳理（8月）
  
其他VR功能
- VR基础数据接口活跃（9月）
- vr作品集加入sitemap（6月）
  


商品数字化
- 商品ID数字化（10月）
- 商品增加设备（11月）
- 圣象商品增加字段（3月）
  
商品履约
- 商品履约（4月）
- 商品增加发货类型人工服务（9月）
  
商城优化
- 商城后端字段对齐钱海（12月）
- 商品履约优化（4月）
  


云影系统
- 固件升级管理（5月）
- APP发版管理（3月、4月）
- 云影增加白名单（5月）
- 云影操作日志（5月）
- 云影线下订单支持取消关闭（7月）
- 云影对公转账问题（12月）
  
海外业务
- 海外伽罗华邮件召回（11月）

- 海外测试环境搭建（8月）
- 海外监控报警（5月）
- 海外&阿里云业务系统清理（5月）
  
营销与增长
- 归因数据回传（12月）
- 定制邀请链接（9月）
- 邀请链接邮件（9月）
  
第三方对接
- 丽兹行对接（10月、11月）
- zoho对接（12月）
- shopify对接（7月、8月）
  
其他功能
- 独家代理（5月、6月）
- 楼盘字典接口增加缓存（4月）
- 帮助中心搜索（11月）
- 文章页面新增翻页功能（8月）
- 客户列表导出（10月）
- 子客户列表支持多个（10月）`;

        // 解析文本数据
        function parseData(text) {
            const lines = text.split('\n');
            const result = {
                titles: [],
                requirements: []
            };

            let currentTitle = '';
            let currentRequirements = [];

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();

                // 跳过空行
                if (!line) continue;

                // 判断是否为标题（不以"-"开头，且不是上一行的子项）
                if (!line.startsWith('-') && !line.startsWith('  -')) {
                    // 保存上一个标题的需求
                    if (currentTitle) {
                        result.titles.push(currentTitle);
                        result.requirements.push({
                            title: currentTitle,
                            items: [...currentRequirements]
                        });
                    }

                    // 开始新的标题
                    currentTitle = line;
                    currentRequirements = [];
                } else {
                    // 提取需求项（去除"-"和缩进）
                    const requirement = line.replace(/^[\s-]+/, '').trim();
                    if (requirement && !requirement.startsWith('技术亮点：')) {
                        currentRequirements.push(requirement);
                    }
                }
            }

            // 保存最后一个标题
            if (currentTitle) {
                result.titles.push(currentTitle);
                result.requirements.push({
                    title: currentTitle,
                    items: [...currentRequirements]
                });
            }

            return result;
        }

        // 初始化
        const data = parseData(textData);
        const titleBackground = document.getElementById('titleBackground');
        const requirementContainer = document.getElementById('requirementContainer');

        let allRequirements = [];

        // 展平所有需求
        data.requirements.forEach(item => {
            item.items.forEach(req => {
                allRequirements.push({
                    text: req,
                    title: item.title
                });
            });
        });

        // 渲染标题背景
        data.titles.forEach(title => {
            const titleEl = document.createElement('div');
            titleEl.className = 'title-item';
            titleEl.textContent = title;
            titleBackground.appendChild(titleEl);
        });

        // 火山口位置（屏幕底部中间）
        const getVolcanoPosition = () => {
            // 根据CSS，火山口在bottom: 185px的位置（从容器底部算起）
            // 火山容器底部对齐屏幕底部
            return {
                x: window.innerWidth / 2,
                y: window.innerHeight - 185 // 火山口位置
            };
        };

        // 记录已占用的位置，避免重叠
        const occupiedPositions = [];

        // 检查位置是否与已有位置重叠
        function isPositionOverlapping(x, y, occupiedPositions, minDistance = 100) {
            for (let pos of occupiedPositions) {
                const distance = Math.sqrt(Math.pow(x - pos.x, 2) + Math.pow(y - pos.y, 2));
                if (distance < minDistance) {
                    return true;
                }
            }
            return false;
        }

        // 生成不重叠的随机位置
        function generateNonOverlappingPosition(occupiedPositions, maxAttempts = 50) {
            const margin = 80;
            const volcano = getVolcanoPosition();
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;

            // 避免在火山口附近
            const volcanoMargin = 200;

            for (let attempt = 0; attempt < maxAttempts; attempt++) {
                // 随机生成位置（屏幕各处）
                let x = margin + Math.random() * (screenWidth - margin * 2);
                let y = margin + Math.random() * (screenHeight - margin * 2);

                // 避免在火山口附近
                const distanceFromVolcano = Math.sqrt(
                    Math.pow(x - volcano.x, 2) + Math.pow(y - volcano.y, 2)
                );

                if (distanceFromVolcano < volcanoMargin) {
                    continue; // 太靠近火山，重新生成
                }

                // 检查是否重叠
                if (!isPositionOverlapping(x, y, occupiedPositions)) {
                    // 记录这个位置
                    occupiedPositions.push({ x, y });
                    return { x, y };
                }
            }

            // 如果尝试多次都重叠，返回一个随机位置（允许重叠）
            const x = margin + Math.random() * (screenWidth - margin * 2);
            const y = margin + Math.random() * (screenHeight - margin * 2);
            occupiedPositions.push({ x, y });
            return { x, y };
        }

        // 清理过期的位置记录（当元素淡出后）
        function removeOccupiedPosition(x, y) {
            const index = occupiedPositions.findIndex(
                pos => Math.abs(pos.x - x) < 1 && Math.abs(pos.y - y) < 1
            );
            if (index > -1) {
                occupiedPositions.splice(index, 1);
            }
        }

        // 生成随机背景颜色
        function getRandomBackgroundColor() {
            // 预定义一些好看的颜色（暖色调和冷色调）
            const colors = [
                { r: 255, g: 69, b: 0 },    // 橙红色
                { r: 255, g: 140, b: 0 },   // 深橙色
                { r: 255, g: 165, b: 0 },   // 橙色
                { r: 220, g: 20, b: 60 },   // 深红色
                { r: 255, g: 99, b: 71 },   // 番茄红
                { r: 255, g: 20, b: 147 },   // 深粉红
                { r: 138, g: 43, b: 226 },   // 蓝紫色
                { r: 72, g: 61, b: 139 },    // 深蓝紫色
                { r: 30, g: 144, b: 255 },   // 蓝色
                { r: 0, g: 191, b: 255 },     // 深天蓝
                { r: 32, g: 178, b: 170 },    // 浅海绿
                { r: 50, g: 205, b: 50 },     // 酸橙绿
                { r: 255, g: 215, b: 0 },     // 金色
                { r: 255, g: 140, b: 0 },     // 深橙色
                { r: 199, g: 21, b: 133 },    // 中紫红
                { r: 106, g: 90, b: 205 },    // 石板蓝
            ];

            // 随机选择一个颜色
            const color = colors[Math.floor(Math.random() * colors.length)];

            // 设置透明度（0.75-0.85之间，确保文字清晰可见）
            const opacity = 0.75 + Math.random() * 0.1;

            return `rgba(${color.r}, ${color.g}, ${color.b}, ${opacity})`;
        }

        // 创建单个需求项并喷发（抛物线轨迹）
        function createEruptingRequirement(requirement, index, total) {
            if (!requirement) return;

            // 创建需求项元素
            const requirementEl = document.createElement('div');
            requirementEl.className = 'requirement-item';
            requirementEl.textContent = requirement.text;

            // 设置随机背景颜色
            const randomBgColor = getRandomBackgroundColor();
            requirementEl.style.background = randomBgColor;

            const volcano = getVolcanoPosition();

            // 生成不重叠的散落位置（屏幕各处）
            const landingPos = generateNonOverlappingPosition(occupiedPositions);
            const landX = landingPos.x;
            const landY = landingPos.y;

            // 落地后的水平倾斜角度（小幅度的不水平，-10到10度）
            const finalRotation = (Math.random() - 0.5) * 20; // -10到10度

            // 初始位置在火山口
            requirementEl.style.position = 'absolute';
            requirementEl.style.left = volcano.x + 'px';
            requirementEl.style.top = volcano.y + 'px';
            requirementEl.style.transform = 'translate(-50%, -50%)';
            requirementEl.style.opacity = '1';

            requirementContainer.appendChild(requirementEl);

            // 计算飞行时间（2.5-3.5秒随机）
            const flightTime = 2500 + Math.random() * 1000;

            // 轨迹参数
            const startX = volcano.x;
            const startY = volcano.y;
            const endX = landX;
            const endY = landY;

            // 计算距离和方向
            const distance = Math.abs(endX - startX);
            const horizontalDirection = endX > startX ? 1 : -1;

            // 计算从火山口到窗口顶部的距离（最高点要达到窗口顶部）
            const topY = 0; // 窗口顶部
            const peakHeight = startY - topY; // 从火山口到窗口顶部的距离

            // 随机弯曲强度（让每条线有不同的弯曲程度）
            const curveIntensity = 0.4 + Math.random() * 0.5; // 0.4-0.9
            const sideCurve = (Math.random() - 0.5) * 100; // 左右弯曲幅度（-50到50）

            // 弯曲方向（随机左右弯曲）
            const curveDirection = Math.random() > 0.5 ? 1 : -1;

            // 贝塞尔曲线控制点（创建自然的S型弯曲，最高点达到窗口顶部）
            // 为了确保最高点达到窗口顶部，让控制点的Y坐标设置为窗口顶部或稍高
            const peakOffset = Math.random() * 20; // 0-20px的随机偏移，让最高点稍微变化

            // 控制点1：上升阶段的弯曲点（在轨迹的1/3处，偏向一侧）
            const cp1X = startX + (endX - startX) * 0.3 + sideCurve * curveIntensity * curveDirection;
            // 让控制点1的Y坐标设置为窗口顶部或稍高，确保最高点达到窗口顶部
            const cp1Y = topY - peakOffset; // 窗口顶部或稍高

            // 控制点2：下降阶段的弯曲点（在轨迹的2/3处，偏向另一侧，形成S型）
            const cp2X = startX + (endX - startX) * 0.7 - sideCurve * curveIntensity * curveDirection * 0.6;
            // 控制点2的Y坐标也设置为窗口顶部附近，确保最高点达到窗口顶部
            const cp2Y = topY - peakOffset * 0.5; // 窗口顶部附近，稍低一点形成下降

            // 使用requestAnimationFrame实现平滑弯曲轨迹动画
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / flightTime, 1);

                // 使用三次贝塞尔曲线计算位置，创建弯曲效果
                // B(t) = (1-t)³P₀ + 3(1-t)²tP₁ + 3(1-t)t²P₂ + t³P₃
                const t = progress;
                const t2 = t * t;
                const t3 = t2 * t;
                const mt = 1 - t;
                const mt2 = mt * mt;
                const mt3 = mt2 * mt;

                // 贝塞尔曲线计算
                const currentX = mt3 * startX + 3 * mt2 * t * cp1X + 3 * mt * t2 * cp2X + t3 * endX;
                const currentY = mt3 * startY + 3 * mt2 * t * cp1Y + 3 * mt * t2 * cp2Y + t3 * endY;

                requirementEl.style.left = currentX + 'px';
                requirementEl.style.top = currentY + 'px';

                // 计算切线角度，让文字沿着曲线方向
                // 使用贝塞尔曲线的导数来计算切线方向
                // B'(t) = 3(1-t)²(P₁-P₀) + 6(1-t)t(P₂-P₁) + 3t²(P₃-P₂)
                const dx = 3 * mt2 * (cp1X - startX) + 6 * mt * t * (cp2X - cp1X) + 3 * t2 * (endX - cp2X);
                const dy = 3 * mt2 * (cp1Y - startY) + 6 * mt * t * (cp2Y - cp1Y) + 3 * t2 * (endY - cp2Y);

                // 计算角度（弧度转角度）
                const angle = Math.atan2(dy, dx) * 180 / Math.PI;

                // 竖直文字需要旋转90度来匹配曲线方向
                let rotation = angle + 90;

                // 在接近落地时（progress > 0.85），逐渐过渡到水平方向
                // 水平方向对于竖直文字来说是90度，加上小幅倾斜
                const targetRotation = 90 + finalRotation;

                if (progress > 0.85) {
                    const landingProgress = (progress - 0.85) / 0.15; // 0到1
                    // 从曲线角度平滑过渡到水平角度（90度 + 小幅倾斜）
                    rotation = rotation * (1 - landingProgress) + targetRotation * landingProgress;
                }

                requirementEl.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    // 确保落地后完全水平（90度 + 小幅倾斜）
                    requirementEl.style.transform = `translate(-50%, -50%) rotate(${targetRotation}deg)`;

                    // 落地后30秒淡出
                    setTimeout(() => {
                        requirementEl.style.transition = 'opacity 1s ease-out';
                        requirementEl.style.opacity = '0';

                        // 淡出完成后移除元素并清理位置记录
                        setTimeout(() => {
                            removeOccupiedPosition(landX, landY);
                            requirementEl.remove();
                        }, 1000);
                    }, 30000);
                }
            }

            // 添加随机延迟，让喷发更自然（0-200ms）
            setTimeout(() => {
                requestAnimationFrame(animate);
            }, index * 50 + Math.random() * 100);
        }

        // 创建需求项并喷发（每次5-10条）
        function eruptRequirement() {
            if (allRequirements.length === 0) return;

            // 随机选择5-10条需求
            const count = 5 + Math.floor(Math.random() * 6); // 5-10条
            const selectedRequirements = [];

            // 随机选择不重复的需求
            const availableReqs = [...allRequirements];
            for (let i = 0; i < count && availableReqs.length > 0; i++) {
                const randomIndex = Math.floor(Math.random() * availableReqs.length);
                selectedRequirements.push(availableReqs.splice(randomIndex, 1)[0]);
            }

            // 同时喷发所有选中的需求
            selectedRequirements.forEach((req, index) => {
                createEruptingRequirement(req, index, count);
            });
        }

        // 每7秒喷发一次
        setInterval(eruptRequirement, 7000);

        // 立即喷发第一个
        setTimeout(eruptRequirement, 500);
    </script>
</body>

</html>